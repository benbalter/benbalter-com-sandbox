{"title":"Welcome to the Post-CMS World","excerpt":"Jekyll (and other static-sites) lead to simple, flexible, and reliable websites that allow for a renewed focus on what actually matters: the content.","author":"Benjamin J. Balter","layout":"post","comments":true,"category":"Technology","tags":["WordPress","Jekyll","GitHub","benchmarking","benchmarks"],"published":true,"url":"/2012/10/01/welcome-to-the-post-cms-world/","date":"2012-10-01 00:00:00 -0400","id":"/2012/10/01/welcome-to-the-post-cms-world","categories":["Technology"],"next":"I encourage you to read through [Open Source for Government](http://ben.balter.com/open-source-for-government/), a collaborative resource for government employees looking to participate in the open source community. \n\nAlso please feel free to [fork and contribute](https://github.com/benbalter/open-source-for-government) (no technical knowledge necessary).","previous":"<p>A petition was recently posted on <a href='https://petitions.whitehouse.gov/'>We The People</a> demanding <a href='https://petitions.whitehouse.gov/petition/maximize-public-benefit-federal-technology-sharing-government-developed-software-under-open-source/6n5ZBBwf?utm_source=wh.gov&amp;utm_medium=shorturl&amp;utm_campaign=shorturl'>that federally funded software be released under an open source license</a>. Makes sense. The public should have access to what is technically their property.</p><p>However, <a href='http://www.techdirt.com/articles/20120723/12181319800/should-software-created-federal-govt-be-open-source-licensed-public-domain.shtml'>TechDirt posed the question</a> of whether it should be released under an open-source license or public domain, and I&#8217;m afraid they really missed the point.</p><p>There&#8217;s no doubt in my mind that the creator of the petition was simply asking the question &#8220;I can haz source code?&#8221; Plain and simple. Put it in context: 99% of the time when an organization (or an individual) releases software to the public, they do so under the terms of an open source license. It tells users what they can and can&#8217;t do, and tells contributors under what terms they can contribute. It&#8217;s set&#8217;s the ground rules. It&#8217;s a contract with the public. It&#8217;s a prenup for code.</p><p>So what&#8217;s the issue? Although I generally dread the phrase, in this case, government is objectively different. Under 17 U.S.C § 105 US Government Works are not subject to domestic copyright protection. It&#8217;s not technically public domain, but it&#8217;s close enough. <sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup> Any US citizen can use the code any way they wish. There&#8217;s simply no copyright, thus no need to license. <sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup> And this entire debate is a moot point if the software is a derivative work of a viral license like the GPL, the most common open source license. <sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup></p><p>That of course, only applies to code created by a US government employee, an increasingly rare occurrence. <sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup> Absent permission from the contracting officer, the US government retains unlimited rights for all work created under contract (including the right to redistribute). <sup id='fnref:5'><a href='#fn:5' rel='footnote'>5</a></sup> And again a moot point if GPL derivative (and thus must be given to the Government under the GPL.)</p><p>Yet all this is very academic (not to mention dry). Waldo Jaquith and Anil Dash <a href='https://twitter.com/anildash/statuses/227476701599391744'>made a great suggestion</a>: let&#8217;s be pragmatic here. Government doesn&#8217;t hold on to software because they are concerned about licensing. They hold on to software because they have better things to do, because it&#8217;s not within the culture, and because there&#8217;s no angry mob slamming a battering ram against the metaphorical front gates when they don&#8217;t.</p><p>I don&#8217;t think the nuances of federal procurement law is even close to the first thing we should care about here. <sup id='fnref:6'><a href='#fn:6' rel='footnote'>6</a></sup> The concern is about whether feds should do the leg work to open source it or not. The question for us as developers, for the thought leaders in the space, isn&#8217;t how should the US government best license / not license software, but <em>how can the open source community help it to do so.</em> How can we get more software out the door? In a world of finite time, <em>how can we make open sourcing</em> <sup id='fnref:7'><a href='#fn:7' rel='footnote'>7</a></sup> <em>a bonafide priority</em>?</p><p>How? For one, involvement in existing open source projects <sup id='fnref:8'><a href='#fn:8' rel='footnote'>8</a></sup> would surely send a strong message that there&#8217;s latent demand here, and would give the foot soldiers political air cover to forge onward with their efforts. For another, taking ownership of the code itself, and realizing it is <em>our</em> code, not the government&#8217;s would surely change the tone of the debate by encouraging agencies to ship code sooner, rather than delaying release out of fear of criticism.</p><p>Put simply, it&#8217;s about what role we are going to play, not what rights we are going to receive. Let&#8217;s at least get the source code, then we can go back to our regularly scheduled holy wars over licensing.</p><p><em>As always, <a href='http://ben.balter.com/fine-print/'>views are my own</a>.</em></p><div class='footnotes'><hr /><ol><li id='fn:1'>\n<p>I&#8217;d argue that all software, even government funded software should still be licensed under a traditional open source license, to resolve any legal ambiguity when used abroad under the terms of various international copyright treaties and agreements</p>\n<a href='#fnref:1' rev='footnote'>&#8617;</a></li><li id='fn:2'>\n<p>Although citizen-contributions to that project would theoretically not be public domain, thus necessitating a license, which should be clarified in the project&#8217;s documentation at the time of release to avoid potential issues with 21 U.S.C. § 1342.</p>\n<a href='#fnref:2' rev='footnote'>&#8617;</a></li><li id='fn:3'>\n<p>Although again, technically speaking the project as a whole would be licensed under GPL, individual code not dependent on the parent project could be used as a US Government Work.</p>\n<a href='#fnref:3' rev='footnote'>&#8617;</a></li><li id='fn:4'>\n<p>Unless you&#8217;re looking at the <a href='https://github.com/languages/ColdFusion'>vibrant open source cold fusion community</a>.</p>\n<a href='#fnref:4' rev='footnote'>&#8617;</a></li><li id='fn:5'>\n<p>FAR 52.227-14(c)(1)(i). Even if the contracting officer grants such rights, they do not take effect unless the contractor includes a copyright notice at the time of delivery, acknowledging the government&#8217;s sponsorship and indicating the contract number under which it was procured. See FAR 27.404(a)(5).</p>\n<a href='#fnref:5' rev='footnote'>&#8617;</a></li><li id='fn:6'>\n<p>General counsels across government already have enough ammunition to stymy progress.</p>\n<a href='#fnref:6' rev='footnote'>&#8617;</a></li><li id='fn:7'>\n<p>Often the last and least seen step in the enterprise development process.</p>\n<a href='#fnref:7' rev='footnote'>&#8617;</a></li><li id='fn:8'>\n<p>There&#8217;s been <a href='http://ben.balter.com/2012/04/15/cfpb-accepts-first-citizen-submitted-pull-request-on-behalf-of-federal-government/'>exactly one pull request to date</a> across all government github repos.</p>\n<a href='#fnref:8' rev='footnote'>&#8617;</a></li></ol></div>","content":"<p>You may notice things are bit snappier around here these days, having <a href='https://github.com/benbalter/wordpress-to-jekyll-exporter'>recently converted</a> the site from WordPress, to <a href='https://github.com/mojombo/jekyll'>Jekyll</a>.<sup id='fnref:1'><a href='#fn:1' rel='footnote'>1</a></sup></p><p>Jekyll is a blog-aware static site generator — heavily integrated with the social code sharing service GitHub — the move to which, was primarily motivated by a desire to embrace the brave new, <a href='http://developmentseed.org/blog/2012/07/27/build-cms-free-websites/'>post-CMS world</a> we now find ourselves in. While WordPress is great, <a href='http://cl.ly/image/1M420a152e1z'>130 outages over the past six months (totalling more than a day&#8217;s worth of downtime)</a>, left a bit to be desired in terms of hosting.</p><p>Although powered by the open-source CMS WordPress, the old site (shared hosting provided by Bluehost) for performance sake, would actually just served flat HTML and Javscript files from disk (generated on a regular basis by an industry-standard plugin known as <a href='http://wordpress.org/extend/plugins/w3-total-cache/'>W3 Total Cache</a>), but fired up WordPress on every request (on top of the already slugish Apache).</p><p>Don&#8217;t get me wrong. WordPress can be <a href='http://wordpress.org/extend/plugins/batcache/'>configured to fly</a> given the right setup, and that&#8217;s exactly what I set out to do. I got the best of the best. I spun up a shiny new AWS box, got Nginx with microcache up and running, APC for opcode, page, and object cache, and even put everything behind Varnish.</p><p>But as much as it pains the developer in me, just like fixies, PBR, and Javascript, static sites are back in style. Reduce the complexity, push it to the edge, and let the visitor&#8217;s browser call APIs directly to generate any dynamic content you may need. Same functionality, same experience, no headache.</p><p>The pitch is straightforward. It leads to simple, flexible, and reliable websites that allow for a renewed focus on what actually matters: the content. Dave Cole over at <a href='http://developmentseed.org/'>Development Seed</a> (also powered by Jekyll) <a href='http://developmentseed.org/blog/2012/07/27/build-cms-free-websites/'>put it best</a>:</p><blockquote>\n<p>In the past, building websites with features like consistent templates and lists of aggregated content meant setting up complex content management systems. These CMSs consisted of templating logic, application code, and content databases so they could assemble webpages each time they were requested by site visitors. They were complicated systems that depend on many separate applications working together, like a web server to route page requests to a PHP application that uses pre-defined page layout templates to format content that’s stored in a MySQL database. Serving a page request required at least three separate applications all working together — any one failing would bring down the system&#8230;</p>\n</blockquote><blockquote>\n<p>From open source frameworks like Drupal, Wordpress, and Expression Engine to multi-million dollar proprietary applications that the government and big corporations procure from companies that also build tanks and battle ships, these systems produce the same exact output: HTML, CSS, and JavaScript files that web browsers know how to format into the webpages we see. Additional features like RSS or JSON API feeds are just new templates for the same content, and backend workflow modules like those for embedded media and handling email notifications are really separate systems that introduce complexity when integrated with the publishing system.</p>\n</blockquote><p>And then there&#8217;s cost. Putting aside the value of time for a moment, shared hosting&#8217;s going to run you in the ballpark of $7 a month; AWS starts at $14, plus the cost of bandwidth and storage; and Jekyll, if hosted by GitHub? Free.<sup id='fnref:2'><a href='#fn:2' rel='footnote'>2</a></sup></p><p>I stood up the three options side-by-side, and ran them through the riggors of a performance testing tool humerously called <a href='http://www.joedog.org/siege-home/'>Siege</a>, the results of which can be found below.</p><p>I&#8217;m still unpacking some of the boxes of bytes, so if you notice something that doesn&#8217;t seem right, feel free to <a href='https://github.com/benbalter/benbalter.github.com/issues'>open an issue</a>, or better yet, like what you see, feel free to <a href='https://github.com/benbalter/benbalter.github.com'>fork and contribute</a>. Embracing somewhat of a crawl, walk, run, or fail-fast philosohpy, next up is <a href='https://github.com/benbalter/benbalter.github.com/blob/js/_plugins/generate-json.rb'>outputting the pages as JSON</a> and relying on Backbone to do the heavy lifting.</p><p>Is it the <a href='http://presidential-innovation-fellows.github.com/mygov/'>first shots</a> <a href='http://presidential-innovation-fellows.github.com/rfpez-blog/'>of a static-site</a> <a href='http://presidential-innovation-fellows.github.com/bluebutton/'>revolution</a>? Time will tell.</p><p>The CMS is dead. Long live the CMS.</p><hr /><h2 id='the_results'>The Results</h2><p><strong>WARNING: Geek Content!</strong></p><h3 id='homepage'>Homepage</h3><p>Command: <code>siege -c 20 -t 30S -b ben.balter.com</code></p><p>The first test was to benchmark the homepage, the most heavily trafficed page on the site. Given 30 seconds of continuous traffic from 20 concurrent users, Bluehost was able to serve a meager 40 users. AWS managed an impressive 2000 users during that same time period (a 50x performance improvement), and did so twice as fast. Enter Jekyll with more than 2600 users (65x increase), responding on average to each in less than a quarter of a second.</p><h4 id='shared_hosting_bluehost'>Shared Hosting (Bluehost)</h4><pre><code>Transactions:\t\t          40 hits\nAvailability:\t\t      100.00 %\nElapsed time:\t\t       29.54 secs\nData transferred:\t        0.68 MB\nResponse time:\t\t        0.57 secs\nTransaction rate:\t        1.35 trans/sec\nThroughput:\t\t        0.02 MB/sec\nConcurrency:\t\t        0.78\nSuccessful transactions:          40\nFailed transactions:\t           0\nLongest transaction:\t        0.71\nShortest transaction:\t        0.47</code></pre><h4 id='varnish__microcache__page_cache__object_cache_aws'>Varnish + Microcache + Page Cache + Object Cache (AWS)</h4><pre><code>Transactions:\t\t        1954 hits\nAvailability:\t\t      100.00 %\nElapsed time:\t\t       29.39 secs\nData transferred:\t       13.63 MB\nResponse time:\t\t        0.30 secs\nTransaction rate:\t       66.49 trans/sec\nThroughput:\t\t        0.46 MB/sec\nConcurrency:\t\t       19.80\nSuccessful transactions:        1954\nFailed transactions:\t           0\nLongest transaction:\t        0.92\nShortest transaction:\t        0.06</code></pre><h4 id='github_pages'>Github Pages</h4><pre><code>Transactions:\t\t        2629 hits\nAvailability:\t\t      100.00 %\nElapsed time:\t\t       29.42 secs\nData transferred:\t        2.71 MB\nResponse time:\t\t        0.22 secs\nTransaction rate:\t       89.36 trans/sec\nThroughput:\t\t        0.09 MB/sec\nConcurrency:\t\t       19.86\nSuccessful transactions:        2629\nFailed transactions:\t           0\nLongest transaction:\t        1.38\nShortest transaction:\t        0.06</code></pre><h3 id='404s'>404s</h3><p>Command: <code>siege -c 20 -t 30S -b ben.balter.com/aaaaaaa/</code></p><p>The true challenge comes in not from serving a static front page (which is presumably cached by WordPress after the first request), but in what happens when it has to reach into the database to retrieve content, for example, when processing a page that doesn&#8217;t exist.<sup id='fnref:3'><a href='#fn:3' rel='footnote'>3</a></sup> Bluehost squeezed out a single response each second, AWS just over 50, and Jekyll didn&#8217;t flinch at 80.</p><h4 id='shared_hosting_bluehost'>Shared Hosting (Bluehost)</h4><pre><code>Transactions:\t\t          30 hits\nAvailability:\t\t       21.43 %\nElapsed time:\t\t       29.58 secs\nData transferred:\t        0.19 MB\nResponse time:\t\t       14.93 secs\nTransaction rate:\t        1.01 trans/sec\nThroughput:\t\t        0.01 MB/sec\nConcurrency:\t\t       15.14\nSuccessful transactions:           0\nFailed transactions:\t         110\nLongest transaction:\t       22.88\nShortest transaction:\t        0.00</code></pre><h4 id='varnish__microcache__page_cache__object_cache_aws'>Varnish + Microcache + Page Cache + Object Cache (AWS)</h4><pre><code>Transactions:\t\t        1567 hits\nAvailability:\t\t      100.00 %\nElapsed time:\t\t       29.13 secs\nData transferred:\t       14.71 MB\nResponse time:\t\t        0.37 secs\nTransaction rate:\t       53.79 trans/sec\nThroughput:\t\t        0.50 MB/sec\nConcurrency:\t\t       19.83\nSuccessful transactions:           0\nFailed transactions:\t           0\nLongest transaction:\t        1.13\nShortest transaction:\t        0.00</code></pre><h4 id='github_pages'>Github Pages</h4><pre><code>Transactions:\t\t        2373 hits\nAvailability:\t\t      100.00 %\nElapsed time:\t\t       29.82 secs\nData transferred:\t       10.48 MB\nResponse time:\t\t        0.25 secs\nTransaction rate:\t       79.58 trans/sec\nThroughput:\t\t        0.35 MB/sec\nConcurrency:\t\t       19.92\nSuccessful transactions:           0\nFailed transactions:\t           0\nLongest transaction:\t        1.42\nShortest transaction:\t        0.00</code></pre><h3 id='uptime'>Uptime</h3><p>The other concern was uptime. With the AWS route you may get the performance, but with all that complexity, it&#8217;s increasingly more like that something would go wrong, harder to diagnose and resolve, and unlike shared or managed hosting, if your site goes down at 3:00 am, the only person to call is yourself. (no thanks.)</p><p>With Jekyll, because the files are simply sitting on the server, absent a catastrophic failure, when things go wrong with Jekyll, it simply keeps serving the old content.<sup id='fnref:4'><a href='#fn:4' rel='footnote'>4</a></sup></p><h2 id='conclusion'>Conclusion</h2><p>It&#8217;s cheaper, it&#8217;s faster, it&#8217;s simpler, it&#8217;s worry free, and in my opinion, it&#8217;s the future. Welcome to the post-CMS world.</p><div class='footnotes'><hr /><ol><li id='fn:1'>\n<p>Not to be confused with <a href='http://www.youtube.com/watch?v=Q7H_L5cYkg8'>The Jackal</a>.</p>\n<a href='#fnref:1' rev='footnote'>&#8617;</a></li><li id='fn:2'>\n<p>That&#8217;s free as in speech <strong>and</strong> free as in beer.</p>\n<a href='#fnref:2' rev='footnote'>&#8617;</a></li><li id='fn:3'>\n<p>Requesting a page that doesn&#8217;t exist will require WordPress to run multiple database queries to attempt to find the page, a request that would most likely not be cached in the event that the 404 was sent in error.</p>\n<a href='#fnref:3' rev='footnote'>&#8617;</a></li><li id='fn:4'>\n<p>GitHub&#8217;s build queue has been backing up every once in a while as of late, but if a change isn&#8217;t instantanous, I&#8217;m okay with that.</p>\n<a href='#fnref:4' rev='footnote'>&#8617;</a></li></ol></div>","related_posts":[{"url":"/2011/11/29/towards-a-more-agile-government/","title":"Towards a More Agile Government"},{"url":"/2011/09/01/why-wordpress/","title":"Why WordPress"},{"url":"/2012/03/05/wordpress-for-government-and-enterprise/","title":"WordPress for Government - A Problem of Perception"},{"url":"/2010/11/15/will-federal-contracting-officers-soon-have-their-heads-in-the-clouds/","title":"Will Federal Contracting Officers Soon Have Their Heads in the Clouds?\n"},{"url":"/2012/12/15/why-wordpress-next-version-should-just-give-it-a-rest-already/","title":"Why WordPress's next version should just give it a REST already"},{"url":"/2012/04/10/whats-missing-from-cfpbs-awesome-new-source-code-policy/","title":"What's Missing from CFPB's Awesome New Source Code Policy"},{"url":"/2012/06/02/publishing-government-data-that-developers-will-actually-use/","title":"Publishing Government Data That Developers Will Actually Use\n"},{"url":"/2012/10/19/we-ve-been-trained-to-make-paper/","title":"We've been trained to make paper"},{"url":"/2011/08/29/wp-document-revisions-document-management-version-control-wordpress/","title":"WP Document Revisions — Document Management & Version Control for WordPress"},{"url":"/2011/11/01/federal-agility-a-cultural-solution-to-a-technical-problem/","title":"Federal Agility: a Cultural Solution to a Technical Problem"}]}